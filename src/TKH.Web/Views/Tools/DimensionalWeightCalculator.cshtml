@await Html.PartialAsync("_PageHeader", new PageHeaderViewModel("Desi Hesaplama", "Araçlar", "Desi Hesaplama"))

<app-alert type="Info" icon="ki-package" title="Desi Hesaplama Hakkında">
    Gireceğiniz koli ebatları üzerinden <strong>Hacimsel Ağırlık (Desi)</strong> hesaplanır ve tüm kargo firmalarının
    güncel fiyatları karşılaştırılır.
</app-alert>

<div class="card mb-5 shadow-sm">
    <div class="card-body">
        <form id="kt_desi_form" class="form" onsubmit="return false;">
            <div class="row g-5 g-lg-9 mb-8">
                <div class="col-6 col-lg-3 fv-row">
                    <label class="required form-label fs-7 fw-bold mb-2">En (cm)</label>
                    <div class="input-group input-group-sm input-group-solid">
                        <input type="number" class="form-control form-control-solid fs-7" id="width" value="30"
                            min="0" />
                        <span class="input-group-text">cm</span>
                    </div>
                </div>
                <div class="col-6 col-lg-3 fv-row">
                    <label class="required form-label fs-7 fw-bold mb-2">Boy (cm)</label>
                    <div class="input-group input-group-sm input-group-solid">
                        <input type="number" class="form-control form-control-solid fs-7" id="length" value="40"
                            min="0" />
                        <span class="input-group-text">cm</span>
                    </div>
                </div>
                <div class="col-6 col-lg-3 fv-row">
                    <label class="required form-label fs-7 fw-bold mb-2">Yükseklik (cm)</label>
                    <div class="input-group input-group-sm input-group-solid">
                        <input type="number" class="form-control form-control-solid fs-7" id="height" value="20"
                            min="0" />
                        <span class="input-group-text">cm</span>
                    </div>
                </div>
                <div class="col-6 col-lg-3 fv-row">
                    <label class="form-label fs-7 fw-bold mb-2">Satış Fiyatı (TL)</label>
                    <div class="input-group input-group-sm input-group-solid">
                        <input type="number" class="form-control form-control-solid fs-7" id="salesPrice"
                            placeholder="0.00" min="0" step="0.01" />
                        <span class="input-group-text">₺</span>
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-end pt-5">
                <button type="button" class="btn btn-sm btn-primary" id="btnCalculateDesi">
                    <span class="indicator-label"><i class="ki-outline ki-calculator fs-4 me-1"></i> Maliyetleri
                        Hesapla</span>
                </button>
            </div>
        </form>
    </div>
</div>

<div id="resultSection" class="d-none">
    <div class="row g-5 mb-5">
        <div class="col-md-6">
            <div class="card bg-info card-xl-stretch mb-xl-8">
                <div class="card-body py-5">
                    <i class="ki-outline ki-cube-2 fs-2hx text-white ms-n1"></i>
                    <div class="text-white fw-bold fs-1 mb-1 mt-5" id="lblCalculatedDesi">0.00 Desi</div>
                    <div class="fw-semibold text-white fs-7">Hesaplanan Hacimsel Ağırlık</div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card bg-success card-xl-stretch mb-xl-8" id="cardPriceType">
                <div class="card-body py-5">
                    <i class="ki-outline ki-wallet fs-2hx text-white ms-n1"></i>
                    <div class="text-white fw-bold fs-1 mb-1 mt-5" id="lblBaremType">Standart Desi</div>
                    <div class="fw-semibold text-white fs-7" id="lblPriceTypeDesc">Uygulanan Tarife Modeli</div>
                </div>
            </div>
        </div>
    </div>

    <div class="card card-flush shadow-sm">
        <div class="card-body pt-3">
            <div class="table-responsive">
                <table class="table table-row-dashed table-row-gray-300 align-middle gs-0 gy-3">
                    <thead>
                        <tr class="fw-bold text-muted bg-light fs-8 text-uppercase">
                            <th class="ps-4 min-w-150px rounded-start">Kargo Firması</th>
                            <th class="min-w-100px text-end">Hesaplanan Tutar</th>
                            <th class="min-w-100px text-center">Durum</th>
                            <th class="min-w-50px text-center rounded-end pe-4">Detay</th>
                        </tr>
                    </thead>
                    <tbody id="resultTableBody"></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<template id="carrier-row-template">
    <tr class="carrier-row">
        <td class="ps-4">
            <div class="d-flex align-items-center">
                <div class="symbol symbol-35px me-4">
                    <span class="symbol-label bg-light-{color}"><span
                            class="text-{color} fw-bold fs-7">{firstLetter}</span></span>
                </div>
                <span class="text-gray-900 fw-bold fs-7">{carrierName}</span>
            </div>
        </td>
        <td class="text-end fw-bold text-gray-800 pe-4">{price}</td>
        <td class="text-center">{status}</td>
        <td class="text-center pe-4">
            <button type="button" class="btn btn-icon btn-sm btn-light btn-active-light-primary"
                data-bs-toggle="collapse" data-bs-target="#{collapseId}">
                <i class="ki-outline ki-down fs-5"></i>
            </button>
        </td>
    </tr>
    <tr class="collapse bg-light-secondary detail-row" id="{collapseId}">
        <td colspan="4" class="px-10 py-5">
            <div class="fw-bold text-gray-800 mb-2">Ek Hizmet Bedelleri ve Koşullar</div>
            <div class="extras-container">{extras}</div>
        </td>
    </tr>
</template>

@section Scripts {
    <script src="~/assets/js/pages/tools/dimensional-weight-calculator.js"></script>
}
