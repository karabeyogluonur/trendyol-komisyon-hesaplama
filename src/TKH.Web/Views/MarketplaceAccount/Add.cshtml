@model MarketplaceAccountAddViewModel

@await Html.PartialAsync("_PageHeader", new PageHeaderViewModel("Pazaryeri Hesap Yönetimi", "Pazaryeri Hesapları", "Yeni Ekle"))

<app-alert type="Info" title="Süreç Nasıl İşler?" dismissible="true">
    Hesabı eklediğinizde sistem güvenlik ve veri bütünlüğü için şu adımları izler:
    <ol class="mb-0 mt-2 ps-4">
        <li>Hesap <strong>"Sırada Bekliyor"</strong> statüsünde kuyruğa alınır.</li>
        <li>Sırası geldiğinde bağlantı test edilir ve ürünler arka planda çekilmeye başlar.</li>
        <li>İşlem tamamlandığında hesap <strong>"Bağlı"</strong> durumuna geçer ve yönetilebilir hale gelir.</li>
    </ol>
</app-alert>

<div class="card mb-5">
    <div class="card-body">
        <form asp-controller="MarketplaceAccount" asp-action="Add" method="post" class="form"
            id="kt_marketplace_add_form">
            <div asp-validation-summary="ModelOnly" class="alert alert-danger"></div>

            @Html.AntiForgeryToken()

            <div class="row">
                <div class="col-md-6 fv-row mb-7">
                    <label asp-for="MarketplaceType" class="required form-label fs-7 fw-semibold"></label>
                    <select asp-for="MarketplaceType" asp-items="Html.GetEnumSelectList<MarketplaceType>()"
                        class="form-select form-select-sm form-select-solid" data-control="select2"
                        data-placeholder="Seçiniz...">
                        <option value="">Seçiniz...</option>
                    </select>
                    <span asp-validation-for="MarketplaceType" class="text-danger fs-8"></span>
                </div>

                <div class="col-md-6 fv-row mb-7">
                    <label asp-for="StoreName" class="required form-label fs-7 fw-semibold"></label>
                    <input asp-for="StoreName" class="form-control form-control-sm"
                        placeholder="Örn: Trendyol Ana Mağaza" maxlength="50" />
                    <span asp-validation-for="StoreName" class="text-danger fs-8"></span>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12 fv-row mb-7">
                    <label asp-for="MerchantId" class="required form-label fs-7 fw-semibold"></label>
                    <input asp-for="MerchantId" class="form-control form-control-sm"
                        placeholder="Satıcı ID / Merchant ID" />
                    <div class="text-muted fs-8 mt-1">Pazaryeri panelinde genellikle sağ üst köşede veya API ayarlarında
                        'Satıcı ID' olarak yazar.</div>
                    <span asp-validation-for="MerchantId" class="text-danger fs-8"></span>
                </div>
            </div>

            <div class="separator separator-dashed my-6"></div>

            <app-alert type="Info" icon="ki-shield-tick">
                Gireceğiniz <strong>API Secret Key</strong> veritabanında 256-bit şifreleme ile saklanacaktır.
                Lütfen bilgileri kopyalarken başında veya sonunda boşluk bırakmadığınızdan emin olun.
            </app-alert>

            <div class="row">
                <div class="col-md-6 fv-row mb-7">
                    <label asp-for="ApiKey" class="required form-label fs-7 fw-semibold"></label>
                    <input asp-for="ApiKey" class="form-control form-control-sm" placeholder="API Anahtarı"
                        autocomplete="off" />
                    <span asp-validation-for="ApiKey" class="text-danger fs-8"></span>
                </div>

                <div class="col-md-6 fv-row mb-7">
                    <label asp-for="ApiSecretKey" class="required form-label fs-7 fw-semibold"></label>
                    <input asp-for="ApiSecretKey" type="password" class="form-control form-control-sm"
                        placeholder="Gizli Anahtar" autocomplete="new-password" />
                    <span asp-validation-for="ApiSecretKey" class="text-danger fs-8"></span>
                </div>
            </div>

            <div class="d-flex justify-content-end pt-5">
                <a asp-action="Index" class="btn btn-sm btn-light me-3">İptal</a>

                <app-submit-button text="Kaydet ve Kurulumu Başlat" id="kt_btn_submit" />
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            $("#kt_marketplace_add_form").submit(function () {
                if ($(this).valid()) {
                    var btn = $("#kt_btn_submit");
                    btn.attr("data-kt-indicator", "on");
                    btn.prop("disabled", true);
                }
            });
        });
    </script>
}
